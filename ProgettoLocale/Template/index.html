<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dati CSV</title>
</head>
<body>
<h1>Dati CSV</h1>

<!-- Campo di input per caricare il file CSV -->
<input type="file" id="csvFileInput" accept=".csv" onchange="readCSVAndGenerateTable(event)">

<table id="csvTable">
    <thead>
    <tr>
        <th>Colonna 1</th>
        <th>Colonna 2</th>
        <!-- Aggiungi altre colonne se necessario -->
    </tr>
    </thead>
    <tbody>
    <!-- Le righe verranno aggiunte qui dallo script -->
    </tbody>
</table>

<script>
    function readCSVAndGenerateTable(event) {
        const input = event.target;
        if ('files' in input && input.files.length > 0) {
            readFileContent(input.files[0]).then(content => {
                const data = parseCSV(content);
                generateTable(data);
            }).catch(error => console.log(error));
        }
    }

    function readFileContent(file) {
        const reader = new FileReader();
        return new Promise((resolve, reject) => {
            reader.onload = event => resolve(event.target.result);
            reader.onerror = error => reject(error);
            reader.readAsText(file);
        });
    }

    function parseCSV(text) {
        // Semplice esempio di parsing. Considera l'uso di una libreria per casi più complessi
        return text.split('\n').map(row => row.split(','));
    }

    function generateTable(data) {
        const tableBody = document.getElementById('csvTable').getElementsByTagName('tbody')[0];
        tableBody.innerHTML = ''; // Pulisci la tabella prima di aggiungere nuove righe
        data.forEach((row, index) => {
            if (index > 0) { // Opzionale: salta l'intestazione se già definita
                let newRow = tableBody.insertRow();
                row.forEach(cellData => {
                    let newCell = newRow.insertCell();
                    let newText = document.createTextNode(cellData);
                    newCell.appendChild(newText);
                });
            }
        });
    }
</script>
</body>
</html>

